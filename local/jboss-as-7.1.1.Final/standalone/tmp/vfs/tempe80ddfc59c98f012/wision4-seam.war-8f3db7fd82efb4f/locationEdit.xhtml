<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:s="http://jboss.com/products/seam/taglib"
                xmlns:rich="http://richfaces.org/rich"
                template="/layout/template.xhtml">

    <ui:define name="title">Wision4 - #{locationAction.location.id == null ? (userContext.canEdit ? 'New Location' : 'Location') : (userContext.canEdit ? 'Edit Location' : 'View Location')}</ui:define>

    <ui:define name="content">
        <h2>#{locationAction.location.id == null ? (userContext.canEdit ? 'Create Location' : 'Location') : (userContext.canEdit ? 'Edit Location' : 'View Location')}</h2>

        <ui:fragment rendered="#{not userContext.canEdit}">
            <p class="readonly-notice">You are viewing this record in read-only mode.</p>
        </ui:fragment>

        <h:form id="locationForm">
            <input type="hidden" name="cid" value="#{conversation.id}"/>

            <div class="form-panel">
                <div class="form-title">Location Details</div>
                <table class="form-table">
                    <tr>
                        <td class="label-col">
                            <h:outputLabel for="locationName" value="Location Name"/>
                            <ui:fragment rendered="#{userContext.canEdit}">
                                <span class="required-marker">*</span>
                            </ui:fragment>
                        </td>
                        <td class="field-col">
                            <h:inputText id="locationName" value="#{locationAction.location.locationName}"
                                         required="true" requiredMessage="Location name is required."
                                         maxlength="200" disabled="#{not userContext.canEdit}"/>
                            <h:message for="locationName" styleClass="error-message"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="label-col">
                            <h:outputLabel for="address" value="Address"/>
                        </td>
                        <td class="field-col">
                            <h:inputText id="address" value="#{locationAction.location.address}"
                                         maxlength="500" disabled="#{not userContext.canEdit}"/>
                            <h:message for="address" styleClass="error-message"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="label-col">
                            <h:outputLabel for="zipCode" value="Zip Code"/>
                        </td>
                        <td class="field-col">
                            <h:inputText id="zipCode" value="#{locationAction.location.zipCode}"
                                         maxlength="20" style="width:120px;"
                                         disabled="#{not userContext.canEdit}"/>
                            <h:message for="zipCode" styleClass="error-message"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="label-col">
                            <h:outputLabel for="state" value="State"/>
                            <ui:fragment rendered="#{userContext.canEdit}">
                                <span class="required-marker">*</span>
                            </ui:fragment>
                        </td>
                        <td class="field-col">
                            <h:selectOneMenu id="state" value="#{locationAction.location.state}"
                                             required="true" requiredMessage="State is required."
                                             disabled="#{not userContext.canEdit}">
                                <f:selectItems value="#{locationAction.stateItems}"/>
                            </h:selectOneMenu>
                            <h:message for="state" styleClass="error-message"/>
                        </td>
                    </tr>
                </table>
            </div>

            <!-- Buttons -->
            <div class="button-bar">
                <h:commandButton value="#{userContext.canEdit ? 'Cancel' : 'Back'}" action="#{locationAction.cancel}"
                                 immediate="true" styleClass="btn btn-cancel"/>
                <ui:fragment rendered="#{userContext.canEdit}">
                    <h:commandButton value="Save" action="#{locationAction.save}"
                                     styleClass="btn btn-primary"/>
                </ui:fragment>
            </div>

        </h:form>
    </ui:define>

</ui:composition>
